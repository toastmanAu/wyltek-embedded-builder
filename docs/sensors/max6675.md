# MAX6675 — Thermocouple Temperature Sensor
**Driver:** `WyMAX6675.h`

---

## What it does
Reads a K-type thermocouple and converts the temperature to a digital value over SPI. Measures from 0°C to 1023.75°C with 0.25°C resolution. Perfect for high-temperature applications like reflow ovens, kilns, BBQ smokers, or 3D printer hot ends.

## The thermocouple
The MAX6675 is the chip — you also need a K-type thermocouple probe. They're the yellow connectors. Any K-type thermocouple works: short probes, long probes, beaded probes, high-speed probes. The max temperature of the thermocouple itself varies by probe (usually 400–1300°C, but the MAX6675 chip tops out at 1023.75°C).

## Wiring

| MAX6675 Pin | ESP32 |
|------------|-------|
| VCC | 3.3V or 5V |
| GND | GND |
| SCK | GPIO (SPI clock) |
| CS | GPIO (chip select, active LOW) |
| SO | GPIO (MISO — data output) |
| T+ | Thermocouple + (yellow, usually) |
| T- | Thermocouple - |

**MOSI is not needed.** The MAX6675 is read-only SPI — it only sends data, never receives. Connect SO to your MISO pin and leave MOSI unconnected (or connect it for SPI bus sharing — it'll just be ignored).

## SPI bus

The MAX6675 uses standard SPI mode 0. Most breakout boards work at up to 4.3MHz, but the driver defaults to hardware SPI speeds which is fine.

## Specs

| Parameter | Value |
|-----------|-------|
| Temperature range | 0°C to 1023.75°C |
| Resolution | 0.25°C |
| Accuracy | ±2°C (typical) at 25°C ambient |
| Thermocouple type | K-type only |
| Interface | SPI, mode 0 |
| Max SPI clock | 4.3MHz |
| Conversion time | ~170ms |
| Supply | 3–5.5V |

## Code Example

```cpp
#include <WySensors.h>

WySensors sensors;

void setup() {
    // MOSI, MISO, SCK, CS
    sensors.addSPI<WyMAX6675>("oven", -1, 19, 18, 5);
    sensors.begin();  // note: begin() waits 500ms for chip to settle
}

void loop() {
    WySensorData d = sensors.read("oven");
    if (d.ok) {
        Serial.printf("Temp: %.2f°C\n", d.temperature);
    } else {
        Serial.println("No thermocouple connected!");
    }
    delay(1000);
}
```

## WySensorData fields

| Field | Content |
|-------|---------|
| `temperature` | Temperature in °C |
| `ok` | `true` if thermocouple connected and reading valid |
| `error` | `"no thermocouple"` if T+ / T- not connected |

## Data format

The MAX6675 sends a 16-bit word:
- Bits 15:3 — temperature (13 bits, LSB = 0.25°C)
- Bit 2 — open thermocouple indicator (1 = no thermocouple)
- Bits 1:0 — always 0

The driver checks bit 2: if set, returns `error = "no thermocouple"`.

## Gotchas

**500ms power-on delay.** The MAX6675 needs 500ms after power-on before the first valid conversion. The driver enforces this in `begin()`. Don't call `begin()` and immediately `read()` in your own code without this delay.

**begin() reads 0xFFFF on failure.** If the sensor isn't responding (not connected, wrong wiring), `begin()` returns `false`. Check your SPI pin assignments.

**Temperature reads 1023.75°C constantly.** This almost always means the thermocouple probe isn't plugged in to the MAX6675 module (bit 2 set). The driver catches this, but if you see `"no thermocouple"` check the T+/T- connection.

**Cold junction compensation is internal.** The MAX6675 automatically compensates for the ambient temperature (cold junction) using an on-chip sensor. This is why it reads absolute temperature, not just the temperature difference at the probe.

**Not for below 0°C.** The MAX6675 bottoms out at 0°C. For sub-zero measurements use a PT100 RTD or NTC thermistor instead.

**K-type thermocouples only.** J-type, T-type, and other thermocouple types have different Seebeck coefficients and will give wrong readings with the MAX6675. The MAX31855 chip supports multiple types.

**Only one conversion in progress at a time.** The MAX6675 takes ~170ms to complete a conversion. Reading faster than that returns the previous conversion's result. The driver doesn't enforce a minimum interval — throttle your reads to at least 250ms.
